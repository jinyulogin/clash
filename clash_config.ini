; ======== OpenClash 在线订阅模板优化版 ========

; 1. 域名组（规则集定义）
ruleset=👽 AI,https://raw.githubusercontent.com/liandu2024/clash/refs/heads/main/list/AI.list
ruleset=📘 GitHub,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Clash/GitHub/GitHub.list
ruleset=👯‍♂️ TikTok,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Clash/TikTok/TikTok.list
ruleset=🙋 Telegram,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Telegram/Telegram.list

; 精简流媒体，只保留主要几个
ruleset=📀 流媒体,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/YouTube/YouTube.list
ruleset=📀 流媒体,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Netflix/Netflix.list
ruleset=📀 流媒体,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Disney/Disney.list
ruleset=📀 流媒体,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Spotify/Spotify.list

; 增加中国域名规则，提升直连准确度
ruleset=➡️ 国内,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/ChinaMax/ChinaMax.list

; 通用国外代理规则
ruleset=🌍 国外,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Clash/Global/Global.list

; 未命中流量兜底：全部走“国外”组
ruleset=🌍 国外,[]FINAL


; ======== 2. 策略组定义 ========

; 服务策略分组（域名组 → 节点组）
custom_proxy_group=👽 AI`select`[]🚀 国外`[]DIRECT
custom_proxy_group=📘 GitHub`select`[]🚀 国外`[]DIRECT
custom_proxy_group=👯‍♂️ TikTok`select`[]📞 通讯`[]🚀 国外
custom_proxy_group=🙋 Telegram`select`[]📞 通讯`[]🚀 国外
custom_proxy_group=📀 流媒体`select`[]🎬 流媒体`[]DIRECT
custom_proxy_group=🌍 国外`select`[]🚀 国外`[]DIRECT
custom_proxy_group=➡️ 国内`select`[]DIRECT`[]🚀 国外


; ======== 3. 聚合策略组（上层逻辑） ========

; 国外主组
custom_proxy_group=🚀 国外`select`[]所有-自动`[]新加坡-自动`[]香港-自动`[]日本-自动`[]美国-自动`[]其他-自动

; 流媒体专用组
custom_proxy_group=🎬 流媒体`select`[]新加坡-自动`[]香港-自动`[]日本-自动`[]美国-自动`[]DIRECT

; 通讯类专用（Telegram / TikTok）
custom_proxy_group=📞 通讯`select`[]新加坡-自动`[]香港-自动`[]日本-自动`[]美国-自动

; 国内默认
custom_proxy_group=➡️ 国内`select`[]DIRECT`[]所有-自动


; ======== 4. 节点组（自动测速定义） ========

; 统一测速地址换成可访问的 Cloudflare
custom_proxy_group=所有-自动`url-test`.*`https://cp.cloudflare.com/generate_204`300,3,100

custom_proxy_group=香港-自动`url-test`(香港|HK|HongKong)`https://cp.cloudflare.com/generate_204`300,3,100
custom_proxy_group=台湾-自动`url-test`(台湾|TW|Taiwan)`https://cp.cloudflare.com/generate_204`300,3,100
custom_proxy_group=日本-自动`url-test`(日本|JP|Japan|东京|大阪)`https://cp.cloudflare.com/generate_204`300,3,100
custom_proxy_group=新加坡-自动`url-test`(新加坡|SG|Singapore|狮城|坡)`https://cp.cloudflare.com/generate_204`300,3,100
custom_proxy_group=韩国-自动`url-test`(韩国|KR|Korea|首尔)`https://cp.cloudflare.com/generate_204`300,3,100
custom_proxy_group=美国-自动`url-test`(美国|US|United States|洛杉|纽约|硅谷)`https://cp.cloudflare.com/generate_204`300,3,100
custom_proxy_group=其他-自动`url-test`(澳|英|法|德|加|印|俄|泰|越|荷|西|南非)`https://cp.cloudflare.com/generate_204`300,3,100


; ======== 5. 启用规则生成器 ========

enable_rule_generator=true
overwrite_original_rules=true
